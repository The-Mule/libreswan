this is an attempt at reproducing github #2051

